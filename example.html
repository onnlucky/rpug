<!doctype html>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>test</title>
<script src="bundle.js"></script>
<body>
    <script type="text/rpug">
button(onclick=incClicks) click
p Click count: #{clicks}
ul
  each val, index in collection
    li= val
      button(onclick=delItem,data=index) -
    </script>
    <script>
        var rpug = require("rpug")

        var collection = []
        var clicks = 0
        function incClicks() {
            clicks += 1
            collection.push(collection.length + 1)
        }
        function delItem(event) {
            collection.splice(event.target.getAttribute("data"), 1)
        }
        rpug.app(function(){ return {clicks, incClicks, collection, delItem} })
    </script>
</body>
